<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>User Profile Page</title>
  <link rel="stylesheet" href="userprofile.css" />
  <script defer src="../../../backend/Volunteer/userprofile.js"></script>
</head>
<body>
  <div id="navbar-placeholder"></div>
  <script type="module">
    import { loadNavbar } from "../../../backend/Navbar/navbar.js";
    loadNavbar();

    // Allow adding more date inputs
    window.addDate = function addDate() {
      const container = document.getElementById("availability-container");
      const input = document.createElement("input");
      input.type = "date";
      input.name = "availability[]";
      input.required = true;
      container.appendChild(document.createElement("br"));
      container.appendChild(input);
    };
  </script>

  <div class="main-panel">
    <form id="profileForm" method="post" action="#">
      <h1>Complete Your Profile</h1>

      <div class="row">
        <div class="form-group">
          <label for="fullName">Full Name</label>
          <input
            type="text"
            id="fullName"
            placeholder="First and Last Name"
            maxlength="50"
            required
            class="textboxuser"
          />
        </div>
      </div>

      <div class="row">
        <div class="form-group">
          <label for="address1">Address 1</label>
          <input
            type="text"
            id="address1"
            placeholder="Address 1"
            maxlength="100"
            required
            class="textboxuser"
          />
        </div>

        <div class="form-group">
          <label for="address2">Address 2</label>
          <input
            type="text"
            id="address2"
            placeholder="Address 2"
            maxlength="100"
            class="textboxuser"
          />
        </div>
      </div>

      <div class="row">
        <div class="form-group">
          <label for="city">City</label>
          <input
            type="text"
            id="city"
            placeholder="City"
            maxlength="100"
            required
            class="textboxuser"
          />
        </div>

        <div class="form-group">
          <label for="state">State</label>
          <select id="state" required class="textboxuser">
            <option value="">Select State</option>
          </select>
        </div>

        <div class="form-group">
          <label for="zip">Zip Code</label>
          <input
            type="text"
            id="zip"
            placeholder="Zip Code"
            pattern="\d{5,9}"
            required
            class="textboxuser"
          />
        </div>
      </div>

      <div class="row">
        <div class="form-group">
          <label for="skills">Skills (hold Ctrl to select multiple)</label>
          <div>
            <select id="skills" name="skills" multiple required size="5" class="skills">
              <option value="teaching">Teaching</option>
              <option value="cooking">Cooking</option>
              <option value="first-aid">First Aid</option>
              <option value="event-planning">Event Planning</option>
              <option value="technical">Technical Support</option>
              <option value="fundraising">Fundraising</option>
              <option value="graphic-design">Graphic Design</option>
              <option value="multilingual">Multilingual</option>
              <option value="CPR-certified">CPR Certified</option>
              <option value="hospital-care">Hospital/Patient Care</option>
              <option value="public-speaking">Public Speaking</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="preferences">Preferences</label>
          <textarea id="preferences" placeholder="Preferences" class="textboxuser"></textarea>
        </div>
      </div>

      <div class="daterow">
        <div class="form-group">
          <label for="availability">Availability (multiple dates required):</label><br />
          <div id="availability-container">
            <input type="date" name="availability[]" required />
          </div>
          <button type="button" onclick="addDate()">Add Another Date</button>
        </div>
      </div>

      <div class="row">
        <button type="submit" class="loginbtn">Save Profile</button>
      </div>
    </form>
  </div>

 
  <script>
    fetch("http://localhost:3000/states")
      .then((res) => res.json())
      .then((states) => {
        const select = document.getElementById("state");
        states.forEach((s) => {
          const opt = document.createElement("option");
          opt.value = s.state_id; // numeric ID
          opt.textContent = `${s.state_code} ${s.state_name}`;
          select.appendChild(opt);
        });
      })
      .catch((err) => console.error("Failed to load states:", err));
  </script>
</body>
</html>
